# Known issues

Updated: 2019-01-30

#### Issues related to previous scanner versions

##### Previous bug

The scanner had bug in the past, so thumbnail generated with previous versions of the scanner could have some defect or lack something:
* fixed height media thumbnails could result blurred
* video thumbnails could lack the transparent video marker

You can delete once for ever all the cache content, but perhaps you don't want to regenerate again all the thumbnails. The solution is to manually delete only the "failed" thumbnail.

As an example, the command to delete thumbnails of `mp4` videos is:

    find /your/cache/directory/ -iname "*mp4_*.jpg" -exec rm {} \;

Repeat the same command for other video extensions, like `avi`.

##### Added gps data

The scanner could not be able to add gps data if json files where generated by pre-gps (<= 2.8) versions; you must manually delete all the json files in cache folder in order to get them with all the needed data. This is true if checksums are not activated in options file.

Set the _checksum_ options to _true_ in order to manage gps data correctly.

#### jquery and other system packages

On Debian/Ubuntu, installing system-wide JavaScript packages like jquery seems not to be enough, at least with apache2: `sudo a2enconf javascript-common` (followed by `sudo service apache2 reload`) must be run on the server to enable the use of `/javascript` virtual directory.

#### ffmpeg/avconv

The scanner isn't able to detect that `ffmpeg/avconv` is installed, so, if it is not installed, videos will not be "seen", and the user will not be warned. If the user installs it afterwards and the albums have not been modified, the scanner will not know that it must rescan the albums tree; a simple workaround is to make any modification in the albums tree.

Besides that, old `ffmpeg/avconv` could not be able to transcode some video. Be sure you have the last version installed.

#### Video date and time

The scanner gets modification date-time for video date-time. Be sure you do not modify it; or, if you modified it, touch it to desidered date-time.

#### Pillow bug

As a result of a pillow bug, exif data could not be read for some photos which have two APP1 (0xFFE1/65505) aka Exif segments. A fix is available, see https://github.com/python-pillow/Pillow/issues/2944#issuecomment-356316273: a line of code is to be added in a python source file.

#### Oriental languages

Oriental languages like chinese do not define easily word separation, so whole word search could thrown no results, try inside word search.

#### Slow web site

If there are many images in the album (say > 1000) you may experience slowlyness in the web site. This is expecially true when the photos are geotagged.

You can speed up the site enabling `json` compression in your web server. On `debian`'s `apache2` this can be easily achieved adding the following line in the proper place to the file `/etc/apache2/mods-enabled/deflate.conf`:

```apache
    AddOutputFilterByType DEFLATE application/json
```

For other web servers/distributions a solution can be found easily.

#### Inexplicable malfunctions in web page due to browser cache

Sometimes something inexplicable happens in javascript, and a common reason is the cache: some json files aren't still in the cache, and the correct ones aren't used. Cleaning the cache solves these problems.

The cache can be the browser's one or the web server one.

#### Privacy concern with password implementation

Passwords can be used to protect content, but carefully read the [explication and warnings](Authentication.md).

#### Album download limitations

Downloading a whole album is permitted only if the total content is less than a given amount (now, 500MB), because the current code needs to generated the zip file in ram before saving it to the disk.

Actually, the limit is browser and ram dependent, so the user can get a notice of preparing the download, but it doesn't ever get an end.

A different approach should be used, saving the zip file while is created.

#### Minified scripts

If you run into strange bugs like photos not displaying, check that this is not caused by minified JavaScript scripts. Set `debug_js = true` into `/etc/myphotoshare/myphotoshare.conf` and run the scanner (or patch `cache/options.json`).

If that's the case, try another minifier. `uglifyjs` is known to create problem while `terser` or `jsmin3` are good options.
